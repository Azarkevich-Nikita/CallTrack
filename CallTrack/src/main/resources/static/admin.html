<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель администратора - CallTrack</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/admin.css">
</head>
<body class="admin-body">
    <div class="admin-layout">
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-mark">CT</div>
                <div>
                    <p class="brand-title">CallTrack</p>
                    <p class="brand-subtitle">Admin</p>
                </div>
            </div>
            <nav class="sidebar-nav" id="adminTabs" aria-label="Разделы панели">
                <button type="button" class="nav-link active" data-panel="dashboard">Рабочий стол</button>
                <button type="button" class="nav-link" data-panel="calls">Звонки</button>
                <button type="button" class="nav-link" data-panel="reports">Отчеты</button>
                <button type="button" class="nav-link" data-panel="debtors">Должники</button>
                <button type="button" class="nav-link" data-panel="alerts">Уведомления</button>
            </nav>
        </aside>

        <main class="admin-main">
            <header class="admin-header">
                <div>
                    <p class="header-label">Оператор связи · Панель администратора</p>
                    <h1>Учет звонков и поступлений</h1>
                </div>
                <div class="admin-user">
                    <span class="user-tag">ADMIN</span>
                    <p>Биллинг и учет</p>
                </div>
            </header>

            <section class="panel active" id="panel-dashboard" aria-label="Рабочий стол">
                <div class="cards-grid">
                    <article class="stat-card">
                        <p class="stat-label">Поступило средств</p>
                        <p class="stat-value" id="overviewPayments">0 ₽</p>
                        <p class="stat-hint">Сумма всех зарегистрированных оплат</p>
                    </article>
                    <article class="stat-card">
                        <p class="stat-label">Зарегистрировано звонков</p>
                        <p class="stat-value" id="overviewCalls">0</p>
                        <p class="stat-hint">Включая местные и международные</p>
                    </article>
                    <article class="stat-card">
                        <p class="stat-label">Стоимость международных</p>
                        <p class="stat-value" id="overviewInternational">0 ₽</p>
                        <p class="stat-hint">Сумма по международным вызовам</p>
                    </article>
                    <article class="stat-card">
                        <p class="stat-label">Клиентов в кредите</p>
                        <p class="stat-value" id="overviewDebtors">0</p>
                        <p class="stat-hint">Количество записей в списке должников</p>
                    </article>
                </div>
                <article class="panel-card">
                    <div class="panel-header">
                        <div>
                            <p class="panel-label">Журнал</p>
                            <h2>Последние события</h2>
                        </div>
                        <button type="button" class="ghost-btn" data-panel-target="calls">Добавить звонок</button>
                    </div>
                    <ul class="log-list" id="activityLog">
                        <li class="log-empty">Нет записей — добавьте звонок.</li>
                    </ul>
                </article>
            </section>

            <section class="panel" id="panel-calls" aria-label="Звонки">
                <div class="panel-split">
                    <article class="panel-card">
                        <div class="panel-header">
                            <div>
                                <p class="panel-label">Трафик</p>
                                <h2>Регистрация звонка</h2>
                            </div>
                        </div>
                        <form class="admin-form" id="callForm">
                            <label>
                                <span>Номер клиента</span>
                                <input type="text" name="msisdn" placeholder="+7 900 000-00-00" required>
                            </label>
                            <div class="form-row">
                                <label>
                                    <span>Тип вызова</span>
                                    <select name="type" required>
                                        <option value="local">Местный</option>
                                        <option value="international">Международный</option>
                                    </select>
                                </label>
                                <label>
                                    <span>Длительность (мин)</span>
                                    <input type="number" name="duration" min="0" step="0.1" required>
                                </label>
                            </div>
                            <label>
                                <span>Дата и время</span>
                                <input type="datetime-local" name="timestamp" required>
                            </label>
                            <label>
                                <span>Комментарий</span>
                                <textarea name="note" rows="3" placeholder="Например: международный звонок, кредитные минуты"></textarea>
                            </label>
                            <button type="submit" class="primary-btn">Сохранить звонок</button>
                        </form>
                    </article>
                    <article class="panel-card">
                        <div class="panel-header">
                            <div>
                                <p class="panel-label">Журнал звонков</p>
                                <h2>Последние записи</h2>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table class="styled-table">
                                <thead>
                                    <tr>
                                        <th>Номер</th>
                                        <th>Тип</th>
                                        <th>Мин</th>
                                        <th>Стоимость</th>
                                    </tr>
                                </thead>
                                <tbody id="callsTableBody">
                                    <tr>
                                        <td colspan="5" class="table-placeholder">Звонков пока нет</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </article>
                </div>
            </section>

            <section class="panel" id="panel-reports" aria-label="Отчеты">
                <article class="panel-card">
                    <div class="panel-header">
                        <div>
                            <p class="panel-label">Отчеты</p>
                            <h2>Выберите период</h2>
                        </div>
                        <label class="month-picker">
                            <span>Месяц</span>
                            <input type="month" id="reportMonth">
                        </label>
                    </div>
                    <div class="report-tabs" role="tablist">
                        <button type="button" class="report-tab active" data-report="calls">Звонки</button>
                        <button type="button" class="report-tab" data-report="payments">Платежи</button>
                        <button type="button" class="report-tab" data-report="debtors">Должники</button>
                    </div>
                    <div class="table-wrapper">
                        <table class="styled-table">
                            <thead id="reportsTableHead"></thead>
                            <tbody id="reportsTableBody">
                                <tr>
                                    <td class="table-placeholder">Нет данных за выбранный период</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="table-actions">
                        <button type="button" class="ghost-btn" id="exportReport">Экспорт CSV</button>
                    </div>
                </article>
            </section>

            <section class="panel" id="panel-debtors" aria-label="Должники">
                <div class="panel-split">
                    <article class="panel-card" style="width: 95%; height: 600px;">
                        <div class="panel-header">
                            <div>
                                <p class="panel-label">Список</p>
                                <h2>Должники</h2>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table class="styled-table">
                                <thead>
                                    <tr>
                                        <th>Номер</th>
                                        <th>Задолженность</th>
                                        <th>Кредитные мин.</th>
                                        <th>Статус</th>
                                    </tr>
                                </thead>
                                <tbody id="debtorsTableBody">
                                    <tr>
                                        <td colspan="4" class="table-placeholder">Нет записей</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </article>
                </div>
            </section>

            <section class="panel" id="panel-alerts" aria-label="Уведомления">
                <article class="panel-card">
                    <div class="panel-header">
                        <div>
                            <p class="panel-label">Уведомления</p>
                            <h2>Сообщить о задолженности</h2>
                        </div>
                    </div>
                    <form class="admin-form" id="alertForm">
                        <label>
                            <span>Выберите клиента</span>
                            <select name="target" id="alertTarget">
                                <option value="all">Все должники</option>
                            </select>
                        </label>
                        <label>
                            <span>Тип уведомления</span>
                            <select name="alertType" required>
                                <option value="remind">Напоминание</option>
                                <option value="limit">Кредитные минуты на исходе</option>
                                <option value="block">Блокировка исходящих</option>
                            </select>
                        </label>
                        <label>
                            <span>Текст сообщения</span>
                            <textarea name="message" rows="4" placeholder="Например: «Пополните счет до 5 числа, чтобы сохранить кредитные минуты»"></textarea>
                        </label>
                        <button type="submit" class="primary-btn">Отправить уведомление</button>
                    </form>
                </article>
            </section>
        </main>
    </div>

    <div class="toast" id="adminToast" role="status"></div>
    <script src="scripts/admin.js"></script>
</body>
</html>
